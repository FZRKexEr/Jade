# 常见问题 (FAQ)

本文档收集了用户常问的问题及其解答。

## 目录

- [安装相关问题](#安装相关问题)
- [引擎连接问题](#引擎连接问题)
- [棋谱导入导出](#棋谱导入导出)
- [性能优化建议](#性能优化建议)
- [macOS 特定问题](#macos-特定问题)

## 安装相关问题

### Q: 应用无法打开，提示"无法验证开发者"

**A:** 这是因为应用不是从 Mac App Store 下载的。解决方法：

1. 进入 **系统设置** > **隐私与安全性**
2. 滚动到"安全性"部分
3. 找到"ChineseChess"的相关消息
4. 点击"仍要打开"
5. 在弹出的确认对话框中点击"打开"

或者，可以使用命令行移除隔离属性：
```bash
xattr -d com.apple.quarantine /Applications/ChineseChess.app
```

### Q: 安装后找不到应用在哪里

**A:** 应用安装在 Applications（应用程序）文件夹中。可以通过以下方式打开：

1. 点击 Dock 中的 Finder
2. 在左侧边栏选择"应用程序"
3. 找到"中国象棋"图标并双击打开

或者使用 Spotlight 搜索：
1. 按 `Cmd+Space` 打开 Spotlight
2. 输入"中国象棋"
3. 按回车打开

### Q: 可以同时在多台 Mac 上安装吗

**A:** 可以。本应用是单机版软件，可以在你拥有的多台 Mac 上自由安装使用，没有数量限制。

### Q: 如何卸载应用

**A:** 卸载步骤：

1. 退出应用（如果正在运行）
2. 打开 Finder，进入"应用程序"文件夹
3. 找到"中国象棋"应用
4. 将应用拖到废纸篓，或右键选择"移到废纸篓"
5. 可选：删除用户数据
   ```bash
   rm -rf ~/Library/Application\ Support/ChineseChess
   rm -rf ~/Library/Preferences/com.chinesechess.app.plist
   ```

## 引擎连接问题

### Q: 连接引擎时提示"引擎连接失败"

**A:** 请按以下步骤排查：

1. **检查引擎文件是否存在**
   ```bash
   ls -la /path/to/pikafish
   ```

2. **检查文件是否有执行权限**
   ```bash
   chmod +x /path/to/pikafish
   ```

3. **检查架构是否匹配**
   ```bash
   file /path/to/pikafish
   # 确保与系统架构匹配（ARM64 或 x86_64）
   ```

4. **测试引擎是否可执行**
   ```bash
   /path/to/pikafish
   # 应该显示 UCI 协议信息
   ```

5. **查看应用日志**
   - 帮助 > 查看日志
   - 检查引擎通信日志

### Q: 引擎连接成功但没有分析结果

**A:** 可能的原因和解决方案：

1. **UCI_Variant 未设置**
   - 进入 **引擎 > 引擎选项**
   - 确保 `UCI_Variant` 设置为 `xiangqi`

2. **分析模式未启动**
   - 点击 **引擎 > 分析模式** 或按 `Cmd+T`

3. **引擎计算时间太短**
   - 增加引擎的思考时间
   - 检查 Hash 和 Threads 设置

### Q: 引擎走子太慢了怎么办

**A:** 可以通过以下方式调整引擎速度：

1. **降低 Skill Level**
   - 引擎选项 > Skill Level: 10-15（中等难度）

2. **减少思考时间**
   - 设置最大思考时间
   - 减少深度限制

3. **降低计算资源**
   - 减少 Threads（线程数）
   - 减小 Hash（哈希表大小）

4. **设置移动时间限制**
   - 引擎选项 > Move Overhead

### Q: 如何让引擎更强

**A:** 要让引擎发挥最强实力：

1. **设置 Skill Level = 20**（最高强度）

2. **增加 Hash 大小**
   - 建议设置为可用内存的 1/4 到 1/2
   - 例如 8GB 内存可设置 2048MB

3. **增加 Threads**
   - 设置为物理核心数（不是超线程数）
   - 例如 8 核 CPU 设置为 8

4. **给予足够思考时间**
   - 取消时间限制或设置较长的思考时间
   - 深度越深，引擎越强

5. **使用最新版本引擎**
   - 定期更新到最新版本的 Pikafish
   - 新版本通常更强

## 棋谱导入导出

### Q: 如何导入网上下载的棋谱

**A:** 导入棋谱的方法：

1. **如果是 PGN 文件**：
   - 点击 **文件 > 打开** 或按 `Cmd+O`
   - 选择 `.pgn` 文件
   - 点击"打开"

2. **如果是文本格式的棋谱**：
   - 复制文本内容
   - 点击 **编辑 > 粘贴棋谱** 或按 `Cmd+Shift+V`

3. **如果是 FEN 局面**：
   - 复制 FEN 字符串
   - 点击 **编辑 > 粘贴局面** 或按 `Cmd+Shift+V`

### Q: 导出的棋谱无法在其他软件中打开

**A:** 可能的原因和解决方案：

1. **文件编码问题**
   - 确保保存为 UTF-8 编码
   - 在"另存为"对话框中选择编码格式

2. **PGN 格式错误**
   - 检查必要的标签是否完整
   - 确保着法记录格式正确

3. **中文着法问题**
   - 有些软件不支持中文着法
   - 尝试导出为国际象棋风格（如果软件支持）

### Q: 如何分享我的对局

**A:** 分享对局的多种方式：

1. **导出为 PGN 文件**
   - 点击 **文件 > 导出 PGN**
   - 发送文件给对方

2. **复制到剪贴板**
   - 点击 **编辑 > 复制棋谱**
   - 粘贴到聊天软件或邮件

3. **生成图片**
   - 点击 **文件 > 导出图片**
   - 保存棋盘图片分享

4. **上传到在线平台**
   - 导出 PGN 后上传到象棋网站
   - 生成在线查看链接

### Q: 棋谱中的中文着法是什么意思

**A:** 中国象棋着法记录规则：

**棋子名称**:
| 中文 | 英文 | 走法特点 |
|------|------|----------|
| 车 | Rook | 直线移动，不限格数 |
| 马 | Knight | 日字形，可跳过棋子 |
| 相/象 | Bishop | 田字形，不能过河 |
| 士/仕 | Advisor | 斜线一格，九宫格内 |
| 将/帅 | King | 直线一格，九宫格内 |
| 炮 | Cannon | 直线，吃子需隔一子 |
| 兵/卒 | Pawn | 前进一格，过河可横移 |

**记录格式**:
```
[棋子][起始位置][移动方向][目标位置]
```

**示例**:
- `炮二平五`: 第 2 列的炮平移到第 5 列（当头炮）
- `马8进7`: 第 8 列的马前进到第 7 列
- `车9平8`: 第 9 列的车平移到第 8 列
- `兵三进一`: 第 3 列的兵前进一步

**方向说明**:
- **进**: 向前移动（红方往上，黑方往下）
- **退**: 向后移动
- **平**: 水平移动

## 性能优化建议

### Q: 如何让应用运行更流畅

**A:** 性能优化建议：

#### 1. 降低引擎计算强度

如果电脑配置较低：
- **减少 Hash**: 设置为 128-256 MB
- **减少 Threads**: 设置为 1-2
- **降低 Skill Level**: 设置为 10-15

#### 2. 关闭不必要的功能

- **关闭实时分析**: 不使用时停止分析模式
- **隐藏引擎面板**: 视图 > 隐藏引擎面板
- **关闭动画**: 首选项 > 棋盘 > 关闭动画效果

#### 3. 释放系统资源

- 关闭不必要的后台应用
- 定期清理系统缓存
- 确保有足够的可用内存（至少 2GB 空闲）

#### 4. 优化引擎设置

对于高性能电脑，可以调高设置获得更好的分析质量：

```
Hash: 2048 (如果内存充足)
Threads: 8 (8 核 CPU)
Skill Level: 20
```

### Q: 引擎分析时电脑发热严重

**A:** 这是正常现象，因为引擎计算是 CPU 密集型任务。缓解方法：

1. **降低 Threads**: 减少引擎使用的线程数
2. **设置 Hash 上限**: 限制内存使用
3. **使用笔记本电脑时**: 连接电源，开启高性能模式
4. **定期休息**: 长时间分析时让电脑休息
5. **改善散热**: 确保散热口通畅，使用散热垫

### Q: 如何减少内存占用

**A:** 减少内存使用的方法：

1. **减少引擎 Hash**: 设置为 64-128 MB
2. **关闭分析模式**: 不使用时停止分析
3. **关闭引擎面板**: 隐藏面板可以释放部分内存
4. **限制历史记录**: 在设置中限制历史记录数量
5. **重启应用**: 定期重启应用可以清理内存

### Q: 应用启动很慢

**A:** 加快启动速度的方法：

1. **禁用启动时加载引擎**: 首选项 > 引擎 > 取消"启动时自动连接"
2. **清理最近文件列表**: 文件 > 打开最近使用 > 清除菜单
3. **减少界面动画**: 首选项 > 通用 > 减少动画
4. **检查磁盘**: 使用磁盘工具检查和修复磁盘权限

## macOS 特定问题

### Q: 应用在 macOS Sonoma/Ventura 上的兼容性

**A:** 应用支持 macOS 14.0 (Sonoma) 及更高版本。对于较新的 macOS 版本：

1. **首次启动**: 可能需要在系统设置中允许应用运行
2. **权限设置**: 应用需要访问文件系统（保存/打开棋谱）
3. **通知权限**: 如果需要，可以在系统设置中管理通知权限

### Q: Apple Silicon (M1/M2/M3) 与 Intel Mac 的区别

**A:** 主要区别：

| 方面 | Apple Silicon | Intel |
|------|---------------|-------|
| 引擎下载 | 选择 ARM64 版本 | 选择 x86_64 版本 |
| 性能 | 通常更快更高效 | 正常性能 |
| 兼容性 | 原生支持 | 通过 Rosetta 运行 ARM 引擎 |

**注意**:
- 在 Apple Silicon Mac 上，Intel 版本的引擎可以通过 Rosetta 运行，但效率较低
- 建议下载与你 Mac 架构匹配的引擎版本以获得最佳性能

### Q: 如何完全卸载应用及其数据

**A:** 完整卸载步骤：

1. **退出应用**
   - 确保应用完全关闭

2. **删除应用**
   - 打开 Finder > 应用程序
   - 找到"中国象棋"
   - 拖到废纸篓

3. **删除用户数据**
   ```bash
   # 应用支持文件
   rm -rf ~/Library/Application\ Support/ChineseChess

   # 偏好设置
   rm ~/Library/Preferences/com.chinesechess.app.plist

   # 缓存
   rm -rf ~/Library/Caches/com.chinesechess.app

   # 日志
   rm -rf ~/Library/Logs/ChineseChess
   ```

4. **清空废纸篓**

### Q: 应用崩溃或意外退出

**A:** 如果应用崩溃，可以尝试以下步骤：

1. **重启应用**
   - 完全关闭应用后重新打开

2. **检查日志**
   - 帮助 > 查看日志
   - 查看崩溃前的错误信息

3. **重置设置**
   ```bash
   # 删除偏好设置文件，让应用重置为默认设置
   rm ~/Library/Preferences/com.chinesechess.app.plist
   ```

4. **重新安装应用**
   - 卸载后重新下载安装

5. **报告问题**
   - 在 GitHub Issues 报告崩溃问题
   - 附上崩溃日志和复现步骤

### Q: 快捷键与其他应用冲突

**A:** 如果快捷键与其他应用冲突，可以自定义快捷键：

1. 打开 **首选项** > **快捷键**
2. 找到冲突的快捷键
3. 点击并按下新的组合键
4. 保存设置

或者，可以禁用 macOS 系统的某些快捷键：

1. 打开 **系统设置** > **键盘** > **键盘快捷键**
2. 找到冲突的快捷键
3. 取消勾选或修改为其他组合

---

*更多问题解答请参考 [安装指南](Installation.md) 和 [用户手册](UserGuide.md)。*
